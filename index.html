<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catch My Heart ‚ù§Ô∏è</title>
    <style>
        @font-face {
            font-family: 'bhlingglers';
            src: url('https://fonts.cdnfonts.com/bhlingglers.font') format('truetype');
        }

        body {
            margin: 0;
            padding: 0;
            background-color: #51e2f5;
            font-family: 'Cute Dog', sans-serif;
            overflow: hidden;
            text-align: center;
        }

        h1 {
            color: #ff4081;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.3);
            font-size: 2.5rem;
            font-weight: bold;
        }

        canvas {
            display: block;
            margin: 20px auto;
            background-color: #9df9ef;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }

        .pickup-line {
            font-size: 1.5rem;
            color: #ffffff;
            background-color: rgba(255, 64, 129, 0.8);
            padding: 10px;
            border-radius: 10px;
            margin-top: 10px;
        }

        #endMessage {
            font-size: 28px;
            color: #edf756;
            display: none;
        }

        .start-btn {
            padding: 15px 30px;
            font-size: 20px;
            background-color: #ff4081;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.3);
            transition: transform 0.2s ease-in-out;
        }

        .start-btn:hover {
            transform: scale(1.1);
        }
    </style>
</head>
<body>

<h1>Catch My Heart ‚ù§Ô∏è</h1>
<button class="start-btn" onclick="startGame()">Click to Start</button>
<canvas id="gameCanvas" width="600" height="400"></canvas>
<div class="pickup-line" id="pickupLine">Catch hearts to unlock my pickup lines!</div>
<div id="endMessage">You were too cute to play it! üòç</div>

<audio id="backgroundMusic" loop>
    <iframe width="560" height="315" src="https://www.youtube.com/embed/T3E9Wjbq44E?si=wvg3gaql3-fgcGnr" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</audio>

<script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    const basket = { x: canvas.width / 2 - 40, y: canvas.height - 50, width: 80, height: 20 };
    const hearts = [];
    const heartRadius = 10;

    let score = 0;
    let gameRunning = false;
    let heartInterval;

    const pickupLines = [
        "Are you a magician? Because whenever I look at you, everyone else disappears!",
        "Do you have a map? I just got lost in your eyes.",
        "Are you made of copper and tellurium? Because you're Cu-Te.",
        "Is your name Google? Because you've got everything I'm searching for.",
        "If looks could kill, you'd be a weapon of mass seduction.",
        "Can I borrow a kiss? I promise I'll give it back."
    ];

    let currentPickupLine = 0;

    // Create falling hearts
    function createHeart() {
        const x = Math.random() * (canvas.width - 2 * heartRadius) + heartRadius; // Prevent clipping at edges
        hearts.push({ x, y: -heartRadius });
    }

    // Draw basket
    function drawBasket() {
        ctx.fillStyle = "#ff4081";
        ctx.fillRect(basket.x, basket.y, basket.width, basket.height);
    }

    // Draw hearts
    function drawHearts() {
        ctx.fillStyle = "#edf756";
        hearts.forEach((heart) => {
            ctx.beginPath();
            ctx.arc(heart.x, heart.y, heartRadius, 0, Math.PI * 2);
            ctx.fill();
            ctx.closePath();
        });
    }

    // Update game state
    function updateGame() {
        if (!gameRunning) return;

        ctx.clearRect(0, 0, canvas.width, canvas.height);

        drawBasket();

        // Move hearts and check for collisions
        for (let i = hearts.length - 1; i >= 0; i--) {
            const heart = hearts[i];
            heart.y += 2; // Move heart down

            // Check if heart is caught
            if (
                heart.y + heartRadius > basket.y &&
                heart.x > basket.x &&
                heart.x < basket.x + basket.width
            ) {
                hearts.splice(i, 1); // Remove caught heart
                score++;

                if (currentPickupLine < pickupLines.length) {
                    document.getElementById("pickupLine").innerText = pickupLines[currentPickupLine];
                    currentPickupLine++;
                } else if (currentPickupLine === pickupLines.length) {
                    document.getElementById("pickupLine").innerText = "";
                    document.getElementById("endMessage").style.display = "block";
                    gameRunning = false;
                    clearInterval(heartInterval); // Stop generating new hearts
                }
                continue;
            }

            // Remove hearts that fall off-screen
            if (heart.y > canvas.height) {
                hearts.splice(i, 1);
            }
        }

        drawHearts();

        requestAnimationFrame(updateGame); // Keep updating the game
    }

    // Handle basket movement
    document.addEventListener("keydown", (event) => {
        if (event.key === "ArrowLeft" && basket.x > 0) {
            basket.x -= 20; // Move left
        } else if (event.key === "ArrowRight" && basket.x + basket.width < canvas.width) {
            basket.x += 20; // Move right
        }
    });

    document.addEventListener("touchmove", (event) => {
        let touchX = event.touches[0].clientX;
        let canvasRect = canvas.getBoundingClientRect();
        let newX = touchX - canvasRect.left - basket.width / 2;

        // Prevent basket from moving off-screen
        if (newX < 0) newX = 0;
        if (newX + basket.width > canvas.width) newX = canvas.width - basket.width;

        basket.x = newX;
    });

    function startGame() {
        document.querySelector(".start-btn").style.display = "none";
        gameRunning = true;
        score = 0;
        currentPickupLine = 0;
        document.getElementById("pickupLine").innerText = pickupLines[currentPickupLine];
        document.getElementById("endMessage").style.display = "none";
        hearts.length = 0; // Clear previous hearts

        document.getElementById("backgroundMusic").play(); // Start music when game begins

        heartInterval = setInterval(createHeart, 1000); // Generate new hearts every second
        updateGame(); // Start game loop
    }
</script>

</body>
</html>
